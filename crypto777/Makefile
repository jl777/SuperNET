# Copyright (c) 2013 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# GNU Makefile based on shared rules provided by the Native Client SDK.
# See README.Makefiles for more details.

VALID_TOOLCHAINS := pnacl newlib glibc clang-newlib mac 

NACL_SDK_ROOT ?= $(abspath $(CURDIR))

TARGET = crypto777

EXTRA= -D__PNACL

include $(NACL_SDK_ROOT)/tools/common.mk
CHROME_ARGS += --allow-nacl-socket-api=127.0.0.1

DEPS = nacl_io
LIBS = 

CFLAGS = -Wall -D__PNACL -fno-strict-aliasing $(EXTRA) -I../includes
LFLAGS = libs
include crypto777.sources

# Build rules generated by macros from common.mk:
$(foreach dep,$(DEPS),$(eval $(call DEPEND_RULE,$(dep))))
$(foreach src,$(CRYPTO777_SRCS) $(NANOMSG),$(eval $(call COMPILE_RULE,$(src),$(CFLAGS))))

$(eval $(call LIB_RULE,$(TARGET),$(CRYPTO777_SRCS) $(NANOMSG)))
